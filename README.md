## Назначение
Данная роль создают бэкапы виртуальных машин по дням недели. Для выбора виртуальных машин используются теги ВМ.

## Как работать
1. Создайте в zVirt теги в формате `backup_ДеньНедели`. День недели должен быть на английском и с заглавной буквы (пример `backup_Monday`, `backup_Friday`);
2. Назначьте виртуальным машинам данные теги;
3. Добавьте запуск Playbook'а `playbook.yaml` в планировщик.

Роль обнаруживает экспорт домен (если он есть, иначе выдаёт ошибку) и список ВМ для бэкапа. Указать нужно следующие переменные в файле `backup_vars.yaml`:
- `engine_fqdn`: имя Менеджера управления
- `engine_user`: имя пользователя для доступа к Менеджеру управления
- `engine_password`: пароль пользователя
- `backup_count`: количество хранимых резервных копий (по умолчанию 2)
- `async_backup`: выполнять бэкапы последовательно или асинхронно для разных ВМ (`true` или `false`, по умолчанию `false`)
- `backup_timeout`: время ожидания завершения операций резервного копирования (по умолчанию 3600 секунд)
- `ansible_user` и `ansible_ssh_pass` для доступа к хосту с Экспорт доменом. Нужно для удаления устаревших резервных копий (при необходимости нужно указать `ansible_become_password`)

## Автор
Селезнёв Александр / Seleznjov Alexander
personal mail: number_ultra@mail.ru

## TODO plans
1. Logging: добавить логирование для бэкапов